(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e,t,a){e.exports=a(152)},144:function(e,t,a){},152:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(11),l=a.n(s),o=(a(144),a(23)),c=a(20),i=a(29),h=a(26),u=a(28),p=a(57),d=a(198),m=a(191),f=a(192),v=a(68),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={purchased:a.props.purchased},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"setPurchased",value:function(e,t){this.setState({purchased:e}),this.props.purchase(this.props.name,e,t)}},{key:"componentDidMount",value:function(){0!=this.props.purchased&&(1==this.props.purchased?this.setPurchased(this.props.purchased,this.props.lesserCost):2==this.props.purchased?this.setPurchased(this.props.purchased,this.props.minorCost):3==this.props.purchased&&this.setPurchased(this.props.purchased,this.props.majorCost))}},{key:"render",value:function(){var e=this;if(0==this.state.purchased){var t=Number(this.props.remainingCP);return n.a.createElement("tr",null,n.a.createElement("td",null,this.props.name),n.a.createElement("td",null,this.props.majorCost>0&&this.props.majorCost<=t&&n.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return e.setPurchased(3,e.props.majorCost)}},this.props.majorCost," ")),n.a.createElement("td",null,this.props.minorCost>0&&this.props.minorCost<=t&&n.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return e.setPurchased(2,e.props.minorCost)}},this.props.minorCost," ")),n.a.createElement("td",null,this.props.lesserCost>0&&this.props.lesserCost<=t&&n.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return e.setPurchased(1,e.props.lesserCost)}},this.props.lesserCost," ")))}return n.a.createElement("tr",null,n.a.createElement("td",null,this.props.name),n.a.createElement("td",null,3==this.state.purchased&&n.a.createElement(p.a,{color:"secondary",variant:"contained",onClick:function(){return e.setPurchased(0,0-e.props.majorCost)}},"X ")),n.a.createElement("td",null,2==this.state.purchased&&n.a.createElement(p.a,{color:"secondary",variant:"contained",onClick:function(){return e.setPurchased(0,0-e.props.minorCost)}},"X ")),n.a.createElement("td",null,1==this.state.purchased&&n.a.createElement(p.a,{color:"secondary",variant:"contained",onClick:function(){return e.setPurchased(0,0-e.props.lesserCost)}},"X ")))}}]),t}(n.a.Component),g=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={selectedPowers:a.props.selectedPowers,remainingCP:a.props.totalCP},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return n.a.createElement(d.a,{"aria-describedby":"Manage Powers","aria-labelledby":"Manage Powers",className:"manage-powers-dialog",fullWidth:!0,onClose:this.props.handleClose,open:!0},n.a.createElement(m.a,null,"Manage Powers"),n.a.createElement(f.a,null,n.a.createElement("form",{onSubmit:function(t){return e.props.handleConfirm(e.state.selectedPowers)}},n.a.createElement(v.a,{required:!0,variant:"outlined"},"Remaining CP: ",this.state.remainingCP,n.a.createElement("table",null,n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Power"),n.a.createElement("th",null,"Major"),n.a.createElement("th",null,"Minor"),n.a.createElement("th",null,"Lesser"))),n.a.createElement("tbody",null,this.props.powerData&&this.props.powerData.map(function(t){if(t.Major||t.Minor||t.Lesser)return n.a.createElement(w,{name:t.Power,majorCost:t.Major,minorCost:t.Minor,lesserCost:t.Lesser,purchase:function(t,a,r){return e.purchasePower(t,a,r)},purchased:e.state.selectedPowers[t.Power]?e.state.selectedPowers[t.Power]:0,remainingCP:e.state.remainingCP})})))),n.a.createElement("div",{className:"actionButtons"},n.a.createElement(p.a,{onClick:function(){return e.props.handleConfirm(e.state.selectedPowers)},color:"primary"},"Save"),n.a.createElement(p.a,{onClick:function(){return e.props.handleClose()},color:"primary"},"Cancel")))))}},{key:"purchasePower",value:function(e,t,a){this.state.selectedPowers[e]=t,this.setState({remainingCP:this.state.remainingCP-a})}}]),t}(n.a.Component),P=function(e){var t=e.toggleManagePowers,a=e.toggleManageArch;return n.a.createElement("nav",{className:"navbar navbar-light bg-light"},n.a.createElement("div",{className:"navbar-brand"},n.a.createElement(p.a,{color:"primary",variant:"contained",onClick:t}," Powers "),n.a.createElement(p.a,{color:"primary",variant:"contained",onClick:a}," Archetype/Level ")))},b=a(36),C=a(126),E=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={selectedArch:a.props.selectedArch?a.props.selectedArch:"Standard",level:a.props.level?a.props.level:1},a.handleArchChange=a.handleArchChange.bind(Object(b.a)(Object(b.a)(a))),a.handleLevelChange=a.handleLevelChange.bind(Object(b.a)(Object(b.a)(a))),a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleArchChange",value:function(e){this.setState({selectedArch:e.target.value})}},{key:"handleLevelChange",value:function(e){this.setState({level:Number(e.target.value)})}},{key:"render",value:function(){var e=this;return n.a.createElement(d.a,{"aria-describedby":"Manage Archetype","aria-labelledby":"Manage Archetype",className:"manage-arch-dialog",fullWidth:!0,onClose:this.props.handleClose,open:!0},n.a.createElement(m.a,null,"Manage Archetype"),n.a.createElement(f.a,null,n.a.createElement(v.a,{required:!0,variant:"outlined"},n.a.createElement("select",{value:this.state.selectedArch,onChange:this.handleArchChange},this.buildArchOptions()),n.a.createElement(C.a,{id:"level-input",label:"Level",type:"number",value:this.state.level?this.state.level:1,inputProps:{min:"1",max:"10",step:"1"},onChange:this.handleLevelChange,className:"level-control"})),n.a.createElement("div",{className:"actionButtons"},n.a.createElement(p.a,{onClick:function(){return e.props.handleConfirm(e.state.selectedArch,e.state.level)},color:"primary"},"Save"),n.a.createElement(p.a,{onClick:function(){return e.props.handleClose()},color:"primary"},"Cancel"))))}},{key:"buildArchOptions",value:function(){var e=[],t="";return this.props.archData.forEach(function(a){a.Arch&&a.Arch!==t&&(t=a.Arch,e.push(n.a.createElement("option",{value:t},t)))}),e}}]),t}(n.a.Component),A=a(95),k=a(195),y=a(114),j=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).state={abilityList:[],buffList:[]},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=[],t=[{field:"name",headerName:"Name",width:250},{field:"action",headerName:"Action",width:120},{field:"atk",headerName:"Atk",width:120},{field:"effect",headerName:"Effect",flex:100,renderCell:function(e){return n.a.createElement("strong",null,e.value.split("|||")[0],n.a.createElement(A.a,{title:e.value.split("|||")[1],arrow:!0,interactive:!0},n.a.createElement(p.a,null,"?")))}}],a=0;a<this.props.abilities.length;a++){var r=this.props.abilities[a];e.push({id:a,name:r.name,action:r.action,atk:r.atk,effect:r.dmg+" "+r.effect+"|||"+r.detail.replaceAll('"',"")})}return n.a.createElement(k.a,{minHeight:"25%"},n.a.createElement("h3",null,"Abilities"),n.a.createElement("div",{style:{height:300,width:"100%"}},n.a.createElement(y.a,{hideFooter:!0,hideFooterPagination:!0,rows:e,columns:t})))}}]),t}(n.a.Component),O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(h.a)(t).call(this,e))).closePanels=function(){a.setState({showManagePowersPanel:!1,showManageArchPanel:!1})},a.showManagePowersPanel=function(){a.setState({showManagePowersPanel:!0})},a.showManageArchPanel=function(){a.setState({showManageArchPanel:!0})},a.state={showManagePowersPanel:!1,showManageArchPanel:!1,selectedPowers:{},selectedArch:"",level:1,powerData:[],archData:[],parsedAbilities:[],parsedBuffs:[],parsedArch:null},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("selectedArch"),a=window.localStorage.getItem("level"),r=window.localStorage.getItem("selectedPowers");t&&this.setState({selectedArch:t}),a&&this.setState({level:JSON.parse(a)}),r&&this.setState({selectedPowers:JSON.parse(r)}),fetch("https://raw.githubusercontent.com/aburnettt/adxsheets/master/src/data/powers.csv").then(function(e){return e.text()}).then(function(t){e.setState({powerData:e.csvToJson(t)}),e.parseData()}),fetch("https://raw.githubusercontent.com/aburnettt/adxsheets/master/src/data/arch.csv").then(function(e){return e.text()}).then(function(t){e.setState({archData:e.csvToJson(t)}),e.parseData()})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.state.archData!==[]&&this.state.powerData!==[]&&n.a.createElement(P,{toggleManagePowers:this.showManagePowersPanel,toggleManageArch:this.showManageArchPanel}),n.a.createElement("main",{className:"container"},""==this.state.selectedArch?n.a.createElement("strong",null,"Select an Archetype"):n.a.createElement(j,{abilities:this.state.parsedAbilities,buffs:this.state.parsedBuffs})),this.state.showManagePowersPanel&&this.state.parsedArch&&n.a.createElement(g,{powerData:this.state.powerData,selectedPowers:this.state.selectedPowers,totalCP:this.state.parsedArch.characterPoints,handleConfirm:function(t){return e.updateSelectedPowers(t)},handleClose:function(){return e.closePanels()}}),this.state.showManageArchPanel&&n.a.createElement(E,{archData:this.state.archData,selectedArch:this.state.selectedArch,level:this.state.parsedArch?this.state.parsedArch.level:1,handleConfirm:function(t,a){return e.updateSelectedArch(t,a)},handleClose:function(){return e.closePanels()}}))}},{key:"updateSelectedArch",value:function(e,t){this.setState({selectedArch:e,level:t}),window.localStorage.setItem("selectedArch",e),window.localStorage.setItem("level",JSON.stringify(t)),this.parseData(this.state.selectedPowers,e,t),this.closePanels()}},{key:"updateSelectedPowers",value:function(e){this.setState({selectedPowers:e}),window.localStorage.setItem("selectedPowers",JSON.stringify(e)),this.parseData(e),this.closePanels()}},{key:"csvToJson",value:function(e){for(var t=e.split("\r\n"),a=[],r=t[0].split(","),n=1;n<t.length;n++){for(var s={},l=t[n].split(","),o=0;o<r.length;o++)s[r[o]]=l[o];a.push(s)}return a}},{key:"parseData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.selectedPowers,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.selectedArch,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.level;if(""!==t&&0!==a&&this.state.archData!==[]&&this.state.powerData!==[]){var r={characterPoints:0,lesserRank:0,level:a,majorRank:0,minorRank:0,name:t,trainingPoints:0,willDice:0};this.state.archData.forEach(function(e){if(e.Arch===t){var n=e["Level "+a];e.Detail;switch(e.Row){case"CP":r.characterPoints=n;break;case"TP":r.trainingPoints=n;break;case"Major":r.majorRank=n;break;case"Minor":r.minorRank=n;break;case"Lesser":r.lesserRank=n;break;case"Will Dice":r.willDice=n}}});var n=[];this.state.powerData.forEach(function(t){if(e[t.Power]&&e[t.Power]>0&&r){var a=0;switch(e[t.Power]){case 1:a=r.lesserRank;break;case 2:a=r.minorRank;break;case 3:a=r.majorRank}if("Ability"===t.Row){var s={name:t.Power,action:t.Action,dmg:t["r"+a],atk:"1d20",effect:t.Effect,detail:t.Detail,tags:t.Tags.split(" "),condition:t.Condition};n.push(s)}else t.row}}),this.setState({parsedAbilities:n,parsedBuffs:[],parsedArch:r})}}}]),t}(n.a.Component);a(150),a(151);l.a.render(n.a.createElement(O,null),document.getElementById("root"))}},[[139,1,2]]]);
//# sourceMappingURL=main.37cf023e.chunk.js.map