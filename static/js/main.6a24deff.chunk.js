(this.webpackJsonpadxsheets=this.webpackJsonpadxsheets||[]).push([[0],{74:function(e,t,s){},84:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),i=s(11),c=s.n(i),n=(s(74),s(130)),h=s(3);var o=({toggleManagePowers:e,toggleManageArch:t})=>Object(h.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(h.jsxs)("div",{className:"navbar-brand",children:[Object(h.jsx)(n.a,{color:"primary",variant:"contained",onClick:e,children:" Powers "}),Object(h.jsx)(n.a,{color:"primary",variant:"contained",onClick:t,children:" Archetype/Level "})]})}),l=s(132),d=s(136),p=s(119),j=s(135);class b extends r.a.Component{constructor(e){super(e),this.state={purchased:this.props.purchased}}setPurchased(e,t){this.setState({purchased:e}),this.props.purchase(this.props.name,e,t)}componentDidMount(){}render(){if(0==this.state.purchased){var e=Number(this.props.remainingCP);return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:this.props.name}),Object(h.jsx)("td",{children:this.props.majorCost>0&&this.props.majorCost<=e&&Object(h.jsxs)(n.a,{color:"primary",variant:"contained",onClick:()=>this.setPurchased(3,this.props.majorCost),children:[this.props.majorCost," "]})}),Object(h.jsx)("td",{children:this.props.minorCost>0&&this.props.minorCost<=e&&Object(h.jsxs)(n.a,{color:"primary",variant:"contained",onClick:()=>this.setPurchased(2,this.props.minorCost),children:[this.props.minorCost," "]})}),Object(h.jsx)("td",{children:this.props.lesserCost>0&&this.props.lesserCost<=e&&Object(h.jsxs)(n.a,{color:"primary",variant:"contained",onClick:()=>this.setPurchased(1,this.props.lesserCost),children:[this.props.lesserCost," "]})})]})}return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:this.props.name}),Object(h.jsx)("td",{children:3==this.state.purchased&&Object(h.jsx)(n.a,{color:"secondary",variant:"contained",onClick:()=>this.setPurchased(0,0-this.props.majorCost),children:"X "})}),Object(h.jsx)("td",{children:2==this.state.purchased&&Object(h.jsx)(n.a,{color:"secondary",variant:"contained",onClick:()=>this.setPurchased(0,0-this.props.minorCost),children:"X "})}),Object(h.jsx)("td",{children:1==this.state.purchased&&Object(h.jsx)(n.a,{color:"secondary",variant:"contained",onClick:()=>this.setPurchased(0,0-this.props.lesserCost),children:"X "})})]})}}class w extends r.a.Component{constructor(e){super(e),this.state={selectedPowers:this.props.selectedPowers,remainingCP:this.props.totalCP}}componentDidMount(){var e=this.props.totalCP,t=this.props.selectedPowers;this.props.powerData.forEach((s=>{if(t[s.Power])switch(t[s.Power]){case 1:e-=Number(s.Lesser);break;case 2:e-=Number(s.Minor);break;case 3:e-=Number(s.Major);break;default:return}})),this.setState({remainingCP:e})}render(){return Object(h.jsxs)(l.a,{"aria-describedby":"Manage Powers","aria-labelledby":"Manage Powers",className:"manage-powers-dialog",fullWidth:!0,onClose:this.props.handleClose,open:!0,children:[Object(h.jsx)(d.a,{children:"Manage Powers"}),Object(h.jsx)(p.a,{children:Object(h.jsxs)("form",{onSubmit:e=>this.props.handleConfirm(this.state.selectedPowers),children:[Object(h.jsxs)(j.a,{required:!0,variant:"outlined",children:["Remaining CP: ",this.state.remainingCP,Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Power"}),Object(h.jsx)("th",{children:"Major"}),Object(h.jsx)("th",{children:"Minor"}),Object(h.jsx)("th",{children:"Lesser"})]})}),Object(h.jsx)("tbody",{children:this.props.powerData&&this.props.powerData.map(((e,t)=>{if(e.Major||e.Minor||e.Lesser)return Object(h.jsx)(b,{name:e.Power,majorCost:e.Major,minorCost:e.Minor,lesserCost:e.Lesser,purchase:(e,t,s)=>this.purchasePower(e,t,s),purchased:this.state.selectedPowers[e.Power]?this.state.selectedPowers[e.Power]:0,remainingCP:this.state.remainingCP},t)}))})]})]}),Object(h.jsxs)("div",{className:"actionButtons",children:[Object(h.jsx)(n.a,{onClick:()=>this.props.handleConfirm(this.state.selectedPowers),color:"primary",children:"Save"}),Object(h.jsx)(n.a,{onClick:()=>this.props.handleClose(),color:"primary",children:"Cancel"})]})]})})]})}purchasePower(e,t,s){this.state.selectedPowers[e]=t,this.setState({remainingCP:this.state.remainingCP-s})}}var m=s(127),u=s(121);class x extends r.a.Component{constructor(e){super(e),this.state={selectedArch:this.props.selectedArch?this.props.selectedArch:"Standard",level:this.props.level?this.props.level:1},this.handleArchChange=this.handleArchChange.bind(this),this.handleLevelChange=this.handleLevelChange.bind(this)}componentDidMount(){}handleArchChange(e){this.setState({selectedArch:e.target.value})}handleLevelChange(e){this.setState({level:Number(e.target.value)})}render(){var e=this.state.level,t=this.state.selectedArch;return Object(h.jsxs)(l.a,{"aria-describedby":"Manage Archetype","aria-labelledby":"Manage Archetype",className:"manage-arch-dialog",fullWidth:!0,onClose:this.props.handleClose,open:!0,children:[Object(h.jsx)(d.a,{children:"Manage Archetype"}),Object(h.jsxs)(p.a,{children:[Object(h.jsxs)(j.a,{required:!0,variant:"outlined",children:[Object(h.jsx)("select",{value:this.state.selectedArch,onChange:this.handleArchChange,children:this.buildArchOptions()}),Object(h.jsx)(m.a,{id:"level-input",label:"Level",type:"number",value:this.state.level?this.state.level:1,inputProps:{min:"1",max:"10",step:"1"},onChange:this.handleLevelChange,className:"level-control"}),Object(h.jsx)(u.a,{children:Object(h.jsx)("table",{children:Object(h.jsx)("tbody",{children:this.props.archData.map(((s,a)=>{if(s.Arch===t)return Object(h.jsxs)("tr",{children:[Object(h.jsxs)("td",{children:[s.Row,":"]}),Object(h.jsx)("td",{children:s["Level "+e]})]})}))})})})]}),Object(h.jsxs)("div",{className:"actionButtons",children:[Object(h.jsx)(n.a,{onClick:()=>this.props.handleConfirm(this.state.selectedArch,this.state.level),color:"primary",children:"Save"}),Object(h.jsx)(n.a,{onClick:()=>this.props.handleClose(),color:"primary",children:"Cancel"})]})]})]})}buildArchOptions(){var e=[],t="";return this.props.archData.forEach((s=>{s.Arch&&s.Arch!==t&&(t=s.Arch,e.push(Object(h.jsx)("option",{value:t,children:t})))})),e}}var P=s(129),g=s(133),O=s(123),v=s(124),C=s(126),A=s(122),f=s(125),k=s(117);class M extends r.a.Component{constructor(e){super(e),this.state={abilityList:[],buffList:[]}}render(){return Object(h.jsxs)(P.a,{display:"flex",children:[Object(h.jsx)(P.a,{minHeight:"25%",width:"30%",position:"Left",display:"flex",children:Object(h.jsx)("div",{style:{width:"500px"},children:Object(h.jsx)("h3",{children:"Attributes"})})}),Object(h.jsx)(P.a,{minHeight:"25%",width:"65%",position:"right",display:"flex",children:Object(h.jsxs)("div",{style:{width:"800px"},children:[Object(h.jsx)("h3",{children:" Abilities"}),Object(h.jsx)(A.a,{component:k.a,children:Object(h.jsx)(O.a,{"aria-label":"simple table",children:this.props.abilities.map(((e,t)=>Object(h.jsxs)(v.a,{children:[Object(h.jsx)(f.a,{children:Object(h.jsx)("strong",{children:e.name})}),Object(h.jsxs)(f.a,{children:[Object(h.jsx)(C.a,{children:e.action}),Object(h.jsx)(C.a,{children:e.atk}),Object(h.jsxs)(C.a,{children:[e.dmg+" "+e.effect,e.detail&&e.detail.length>0&&Object(h.jsx)(g.a,{title:e.detail.replaceAll('"',""),arrow:!0,interactive:!0,children:Object(h.jsx)(n.a,{children:"(?)"})})]})]})]})))})})]})})]})}}class S extends r.a.Component{constructor(e){super(e),this.closePanels=()=>{this.setState({showManagePowersPanel:!1,showManageArchPanel:!1})},this.showManagePowersPanel=()=>{this.setState({showManagePowersPanel:!0})},this.showManageArchPanel=()=>{this.setState({showManageArchPanel:!0})},this.state={showManagePowersPanel:!1,showManageArchPanel:!1,selectedPowers:{},selectedArch:"",level:1,powerData:[],archData:[],parsedAbilities:[],parsedBuffs:[],parsedArch:null}}componentDidMount(){let e=window.localStorage.getItem("selectedArch"),t=window.localStorage.getItem("level"),s=window.localStorage.getItem("selectedPowers");e&&this.setState({selectedArch:e}),t&&this.setState({level:JSON.parse(t)}),s&&this.setState({selectedPowers:JSON.parse(s)}),fetch("https://raw.githubusercontent.com/aburnettt/adxsheets/master/src/data/powers.csv").then((e=>e.text())).then((e=>{this.setState({powerData:this.csvToJson(e)}),this.parseData()})),fetch("https://raw.githubusercontent.com/aburnettt/adxsheets/master/src/data/arch.csv").then((e=>e.text())).then((e=>{this.setState({archData:this.csvToJson(e)}),this.parseData()}))}render(){return Object(h.jsxs)("div",{children:[this.state.archData!==[]&&this.state.powerData!==[]&&Object(h.jsx)(o,{toggleManagePowers:this.showManagePowersPanel,toggleManageArch:this.showManageArchPanel}),Object(h.jsx)("main",{className:"container",children:""==this.state.selectedArch?Object(h.jsx)("strong",{children:"Select an Archetype"}):Object(h.jsx)(M,{abilities:this.state.parsedAbilities,buffs:this.state.parsedBuffs})}),this.state.showManagePowersPanel&&this.state.parsedArch&&Object(h.jsx)(w,{powerData:this.state.powerData,selectedPowers:this.state.selectedPowers,totalCP:this.state.parsedArch.characterPoints,handleConfirm:e=>this.updateSelectedPowers(e),handleClose:()=>this.closePanels()}),this.state.showManageArchPanel&&Object(h.jsx)(x,{archData:this.state.archData,selectedArch:this.state.selectedArch,level:this.state.parsedArch?this.state.parsedArch.level:1,handleConfirm:(e,t)=>this.updateSelectedArch(e,t),handleClose:()=>this.closePanels()})]})}updateSelectedArch(e,t){this.setState({selectedArch:e,level:t}),window.localStorage.setItem("selectedArch",e),window.localStorage.setItem("level",JSON.stringify(t)),this.parseData(this.state.selectedPowers,e,t),this.closePanels()}updateSelectedPowers(e){this.setState({selectedPowers:e}),window.localStorage.setItem("selectedPowers",JSON.stringify(e)),this.parseData(e),this.closePanels()}csvToJson(e){for(var t=e.split("\r\n"),s=[],a=t[0].split(","),r=1;r<t.length;r++){for(var i={},c=t[r].split(","),n=0;n<a.length;n++)i[a[n]]=c[n];s.push(i)}return s}parseData(e=this.state.selectedPowers,t=this.state.selectedArch,s=this.state.level){if(""!==t&&0!==s&&this.state.archData!==[]&&this.state.powerData!==[]){var a={characterPoints:0,lesserRank:0,level:s,majorRank:0,minorRank:0,name:t,trainingPoints:0,willDice:0};this.state.archData.forEach((function(e){if(e.Arch===t){var r=e["Level "+s];e.Detail;switch(e.Row){case"CP":a.characterPoints=r;break;case"TP":a.trainingPoints=r;break;case"Major":a.majorRank=r;break;case"Minor":a.minorRank=r;break;case"Lesser":a.lesserRank=r;break;case"Will Dice":a.willDice=r}}}));var r=[];this.state.powerData.forEach((t=>{if(e[t.Power]&&e[t.Power]>0&&a){var s=0;switch(e[t.Power]){case 1:s=a.lesserRank;break;case 2:s=a.minorRank;break;case 3:s=a.majorRank}if("Ability"===t.Row){var i={name:t.Power,action:t.Action,dmg:t["r"+s],atk:"1d20",effect:t.Effect,detail:t.Detail,tags:t.Tags.split(" "),condition:t.Condition};r.push(i)}}})),this.state.powerData.forEach((t=>{if(e[t.Power]&&e[t.Power]>0&&a){switch(e[t.Power]){case 1:a.lesserRank;break;case 2:a.minorRank;break;case 3:a.majorRank}if("Buff"===t.Row)t.Tags}})),this.setState({parsedAbilities:r,parsedBuffs:[],parsedArch:a})}}}s(82),s(83);c.a.render(Object(h.jsx)(S,{}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.6a24deff.chunk.js.map