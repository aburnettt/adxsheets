(this.webpackJsonpadxsheets=this.webpackJsonpadxsheets||[]).push([[0],{74:function(e,t,s){},84:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),i=s(11),n=s.n(i),c=(s(74),s(130)),o=s(2);var h=({toggleManagePowers:e,toggleManageArch:t})=>Object(o.jsx)("nav",{className:"navbar navbar-light bg-light",children:Object(o.jsxs)("div",{className:"navbar-brand",padding:"normal",children:[Object(o.jsx)(c.a,{color:"primary",variant:"contained",onClick:e,children:" Powers "}),"\xa0",Object(o.jsx)(c.a,{color:"primary",variant:"contained",onClick:t,children:" Archetype/Level "})]})}),l=s(133),d=s(136),p=s(119),j=s(134);class b extends r.a.Component{constructor(e){super(e),this.state={purchased:this.props.purchased}}setPurchased(e,t){this.setState({purchased:e}),this.props.purchase(this.props.name,e,t)}componentDidMount(){}render(){if(0==this.state.purchased){var e=Number(this.props.remainingCP);return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:this.props.name}),Object(o.jsx)("td",{children:this.props.majorCost>0&&this.props.majorCost<=e&&Object(o.jsxs)(c.a,{color:"primary",variant:"contained",onClick:()=>this.setPurchased(3,this.props.majorCost),children:[this.props.majorCost," "]})}),Object(o.jsx)("td",{children:this.props.minorCost>0&&this.props.minorCost<=e&&Object(o.jsxs)(c.a,{color:"primary",variant:"contained",onClick:()=>this.setPurchased(2,this.props.minorCost),children:[this.props.minorCost," "]})}),Object(o.jsx)("td",{children:this.props.lesserCost>0&&this.props.lesserCost<=e&&Object(o.jsxs)(c.a,{color:"primary",variant:"contained",onClick:()=>this.setPurchased(1,this.props.lesserCost),children:[this.props.lesserCost," "]})})]})}return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:this.props.name}),Object(o.jsx)("td",{children:3==this.state.purchased&&Object(o.jsx)(c.a,{color:"secondary",variant:"contained",onClick:()=>this.setPurchased(0,0-this.props.majorCost),children:"X "})}),Object(o.jsx)("td",{children:2==this.state.purchased&&Object(o.jsx)(c.a,{color:"secondary",variant:"contained",onClick:()=>this.setPurchased(0,0-this.props.minorCost),children:"X "})}),Object(o.jsx)("td",{children:1==this.state.purchased&&Object(o.jsx)(c.a,{color:"secondary",variant:"contained",onClick:()=>this.setPurchased(0,0-this.props.lesserCost),children:"X "})})]})}}class u extends r.a.Component{constructor(e){super(e),this.state={selectedPowers:this.props.selectedPowers,remainingCP:this.props.totalCP}}componentDidMount(){var e=this.props.totalCP,t=this.props.selectedPowers;this.props.powerData.forEach((s=>{if(t[s.Power])switch(t[s.Power]){case 1:e-=Number(s.Lesser);break;case 2:e-=Number(s.Minor);break;case 3:e-=Number(s.Major);break;default:return}})),this.setState({remainingCP:e})}render(){return Object(o.jsxs)(l.a,{"aria-describedby":"Manage Powers","aria-labelledby":"Manage Powers",className:"manage-powers-dialog",fullWidth:!0,onClose:this.props.handleClose,open:!0,children:[Object(o.jsx)(d.a,{children:"Manage Powers"}),Object(o.jsx)(p.a,{children:Object(o.jsxs)("form",{onSubmit:e=>this.props.handleConfirm(this.state.selectedPowers),children:[Object(o.jsxs)(j.a,{required:!0,variant:"outlined",children:["Remaining CP: ",this.state.remainingCP,Object(o.jsxs)("table",{children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Power"}),Object(o.jsx)("th",{children:"Major"}),Object(o.jsx)("th",{children:"Minor"}),Object(o.jsx)("th",{children:"Lesser"})]})}),Object(o.jsx)("tbody",{children:this.props.powerData&&this.props.powerData.map(((e,t)=>{if(e.Major||e.Minor||e.Lesser)return Object(o.jsx)(b,{name:e.Power,majorCost:e.Major,minorCost:e.Minor,lesserCost:e.Lesser,purchase:(e,t,s)=>this.purchasePower(e,t,s),purchased:this.state.selectedPowers[e.Power]?this.state.selectedPowers[e.Power]:0,remainingCP:this.state.remainingCP},t)}))})]})]}),Object(o.jsxs)("div",{className:"actionButtons",children:[Object(o.jsx)(c.a,{onClick:()=>this.props.handleConfirm(this.state.selectedPowers),color:"primary",children:"Save"}),Object(o.jsx)(c.a,{onClick:()=>this.props.handleClose(),color:"primary",children:"Cancel"})]})]})})]})}purchasePower(e,t,s){this.state.selectedPowers[e]=t,this.setState({remainingCP:this.state.remainingCP-s})}}var g=s(127),m=s(121);class w extends r.a.Component{constructor(e){super(e),this.state={selectedArch:this.props.selectedArch?this.props.selectedArch:"Standard",level:this.props.level?this.props.level:1},this.handleArchChange=this.handleArchChange.bind(this),this.handleLevelChange=this.handleLevelChange.bind(this)}componentDidMount(){}handleArchChange(e){this.setState({selectedArch:e.target.value})}handleLevelChange(e){this.setState({level:Number(e.target.value)})}render(){var e=this.state.level,t=this.state.selectedArch;return Object(o.jsxs)(l.a,{"aria-describedby":"Manage Archetype","aria-labelledby":"Manage Archetype",className:"manage-arch-dialog",fullWidth:!0,onClose:this.props.handleClose,open:!0,children:[Object(o.jsx)(d.a,{children:"Manage Archetype"}),Object(o.jsxs)(p.a,{children:[Object(o.jsxs)(j.a,{required:!0,variant:"outlined",children:[Object(o.jsx)("select",{value:this.state.selectedArch,onChange:this.handleArchChange,children:this.buildArchOptions()}),Object(o.jsx)(g.a,{id:"level-input",label:"Level",type:"number",value:this.state.level?this.state.level:1,inputProps:{min:"1",max:"10",step:"1"},onChange:this.handleLevelChange,className:"level-control"}),Object(o.jsx)(m.a,{children:Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:this.props.archData.map(((s,a)=>{if(s.Arch===t)return Object(o.jsxs)("tr",{children:[Object(o.jsxs)("td",{children:[s.Row,":"]}),Object(o.jsx)("td",{children:s["Level "+e]})]})}))})})})]}),Object(o.jsxs)("div",{className:"actionButtons",children:[Object(o.jsx)(c.a,{onClick:()=>this.props.handleConfirm(this.state.selectedArch,this.state.level),color:"primary",children:"Save"}),Object(o.jsx)(c.a,{onClick:()=>this.props.handleClose(),color:"primary",children:"Cancel"})]})]})]})}buildArchOptions(){var e=[],t="";return this.props.archData.forEach((s=>{s.Arch&&s.Arch!==t&&(t=s.Arch,e.push(Object(o.jsx)("option",{value:t,children:t})))})),e}}var x=s(129),O=s(126),f=s(125),P=s(132),v=s(122),C=s(124),A=s(123);class k extends r.a.Component{constructor(e){super(e),this.state={}}render(){var e=this.props.ability;return Object(o.jsxs)(v.a,{style:{backgroundColor:this.props.color},children:[Object(o.jsx)(A.a,{children:Object(o.jsx)(C.a,{children:Object(o.jsx)("h5",{children:e.name})})}),Object(o.jsxs)(A.a,{children:[Object(o.jsx)(C.a,{padding:"none",children:e.action}),Object(o.jsx)(C.a,{padding:"none",children:e.atk}),Object(o.jsxs)(C.a,{padding:"none",children:[e.dmg+" "+e.effect,e.detail&&e.detail.length>0&&Object(o.jsx)(P.a,{title:e.detail.replaceAll('"',""),arrow:!0,interactive:!0,children:Object(o.jsx)(c.a,{children:"(?)"})})]})]}),e.bufflines.length>0&&e.bufflines.map(((t,s)=>Object(o.jsx)(A.a,{children:Object(o.jsx)(C.a,{padding:"none",children:t.value+" "+t.effect+(t.condition.length>0?" when "+t.condition:"")+(t.power===e.name?"":" from "+t.power)})})))]})}}class M extends r.a.Component{constructor(e){super(e),this.state={}}render(){var e=this.props.buff,t=e.value+" "+e.effect,s=e.condition&&e.condition.length>0?" when "+e.condition:"",a="From "+e.power;return Object(o.jsxs)("div",{style:{backgroundColor:this.props.color},children:[t,s,Object(o.jsx)("br",{}),Object(o.jsx)("small",{children:a})]})}}class y extends r.a.Component{constructor(e){super(e),this.state={abilityList:[],buffList:[]}}nameToColor(e){var t=0,s=e.length,a=0;if(s>0)for(;a<s;)t=(t<<5)-t+e.charCodeAt(a++)|0;var r=Math.abs(t).toString(16);return"#"+(255-Math.round(parseInt(r.substr(0,2),16)/2)).toString(16)+(255-Math.round(parseInt(r.substr(2,2),16)/2)).toString(16)+(255-Math.round(parseInt(r.substr(4,2),16)/2)).toString(16)}render(){return Object(o.jsxs)(x.a,{display:"flex",children:[Object(o.jsx)(x.a,{minHeight:"25%",width:"30%",position:"Left",display:"flex",children:Object(o.jsxs)("div",{style:{width:"500px"},children:[Object(o.jsx)("h3",{children:"Attributes"}),this.props.buffs.map(((e,t)=>Object(o.jsx)(M,{buff:e,color:this.nameToColor(e.effect)},t)))]})}),Object(o.jsx)(x.a,{minHeight:"25%",width:"65%",position:"right",display:"flex",children:Object(o.jsxs)("div",{style:{width:"800px"},children:[Object(o.jsx)("h3",{children:" Abilities"}),Object(o.jsx)(f.a,{children:Object(o.jsx)(O.a,{"aria-label":"simple table",children:this.props.abilities.map(((e,t)=>Object(o.jsx)(k,{ability:e,color:this.nameToColor(e.name)},t)))})})]})})]})}}class S extends r.a.Component{constructor(e){super(e),this.closePanels=()=>{this.setState({showManagePowersPanel:!1,showManageArchPanel:!1})},this.showManagePowersPanel=()=>{this.setState({showManagePowersPanel:!0})},this.showManageArchPanel=()=>{this.setState({showManageArchPanel:!0})},this.getRank=(e,t)=>{switch(t){case 1:return e.lesserRank;case 2:return e.minorRank;case 3:return e.majorRank;default:return 0}},this.state={showManagePowersPanel:!1,showManageArchPanel:!1,selectedPowers:{},selectedArch:"",level:1,powerData:[],archData:[],parsedAbilities:[],parsedBuffs:[],parsedArch:null}}componentDidMount(){let e=window.localStorage.getItem("selectedArch"),t=window.localStorage.getItem("level"),s=window.localStorage.getItem("selectedPowers");e&&this.setState({selectedArch:e}),t&&this.setState({level:JSON.parse(t)}),s&&this.setState({selectedPowers:JSON.parse(s)}),fetch("https://raw.githubusercontent.com/aburnettt/adxsheets/master/src/data/powers.csv").then((e=>e.text())).then((e=>{this.setState({powerData:this.csvToJson(e)}),this.parseData()})),fetch("https://raw.githubusercontent.com/aburnettt/adxsheets/master/src/data/arch.csv").then((e=>e.text())).then((e=>{this.setState({archData:this.csvToJson(e)}),this.parseData()}))}render(){return Object(o.jsxs)("div",{children:[this.state.archData!==[]&&this.state.powerData!==[]&&Object(o.jsx)(h,{toggleManagePowers:this.showManagePowersPanel,toggleManageArch:this.showManageArchPanel}),Object(o.jsx)("main",{className:"container",children:""==this.state.selectedArch?Object(o.jsx)("strong",{children:"Select an Archetype"}):Object(o.jsx)(y,{abilities:this.state.parsedAbilities,buffs:this.state.parsedBuffs})}),this.state.showManagePowersPanel&&this.state.parsedArch&&Object(o.jsx)(u,{powerData:this.state.powerData,selectedPowers:this.state.selectedPowers,totalCP:this.state.parsedArch.characterPoints,handleConfirm:e=>this.updateSelectedPowers(e),handleClose:()=>this.closePanels()}),this.state.showManageArchPanel&&Object(o.jsx)(w,{archData:this.state.archData,selectedArch:this.state.selectedArch,level:this.state.parsedArch?this.state.parsedArch.level:1,handleConfirm:(e,t)=>this.updateSelectedArch(e,t),handleClose:()=>this.closePanels()})]})}updateSelectedArch(e,t){this.setState({selectedArch:e,level:t}),window.localStorage.setItem("selectedArch",e),window.localStorage.setItem("level",JSON.stringify(t)),this.parseData(this.state.selectedPowers,e,t),this.closePanels()}updateSelectedPowers(e){this.setState({selectedPowers:e}),window.localStorage.setItem("selectedPowers",JSON.stringify(e)),this.parseData(e),this.closePanels()}csvToJson(e){for(var t=e.split("\r\n"),s=[],a=t[0].split(","),r=1;r<t.length;r++){for(var i={},n=t[r].split(","),c=0;c<a.length;c++)i[a[c]]=n[c];s.push(i)}return s}parseData(e=this.state.selectedPowers,t=this.state.selectedArch,s=this.state.level){if(""!==t&&0!==s&&this.state.archData!==[]&&this.state.powerData!==[]){var a={characterPoints:0,lesserRank:0,level:s,majorRank:0,minorRank:0,name:t,trainingPoints:0,willDice:0};this.state.archData.forEach((function(e){if(e.Arch===t){var r=e["Level "+s];e.Detail;switch(e.Row){case"CP":a.characterPoints=r;break;case"TP":a.trainingPoints=r;break;case"Major":a.majorRank=r;break;case"Minor":a.minorRank=r;break;case"Lesser":a.lesserRank=r;break;case"Will Dice":a.willDice=r}}}));var r=[],i=[];this.state.powerData.forEach((t=>{if(e[t.Power]&&e[t.Power]>0&&a){var s=this.getRank(a,e[t.Power]);if("Ability"===t.Row){var i={name:t.Power,action:t.Action,dmg:t["r"+s],atk:"1d20",effect:t.Effect,detail:t.Detail,tags:t.Tags.length>0?t.Tags.split(" "):[],condition:t.Condition,bufflines:[]};r.push(i)}}})),this.state.powerData.forEach((t=>{if(e[t.Power]&&e[t.Power]>0&&a){var s=this.getRank(a,e[t.power]);if("Buff"===t.Row){var n=t.Tags.split(" "),c={power:t.Power,effect:t.Effect,value:t["r"+s],condition:t.Condition,detail:t.Detail,tags:t.Tags.length>0?t.Tags.split(" "):[]};c.tags.includes("passive")&&i.push(c),r.map(((e,t)=>{if(e.name===c.power)e.bufflines.push(c);else if(e.tags.length>0){e.tags.forEach((t=>{if(n.includes(t)){switch(c.effect){case"Priority":e.atk=c.value;break;case"ATK":e.atk+="+"+c.value;break;case"DMG":e.dmg+="+"+c.value}e.bufflines.push(c)}}))}}))}}})),this.setState({parsedAbilities:r,parsedBuffs:i,parsedArch:a})}}}s(82),s(83);n.a.render(Object(o.jsx)(S,{}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.294e632f.chunk.js.map