(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){e.exports=a(142)},134:function(e,t,a){},142:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),i=a.n(s),o=(a(134),a(28)),l=a(21),c=a(35),u=a(30),d=a(34),h=a(54),m=a(189),p=a(184),f=a(185),w=a(64),b=a(119),P=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={purchased:0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.props.purchase(this.props.name,this.state.purchased)}},{key:"render",value:function(){var e=this;return 0==this.state.purchased?r.a.createElement("tr",null,r.a.createElement("td",null,this.props.name),r.a.createElement("td",null,this.props.majorCost>0&&r.a.createElement(h.a,{color:"primary",variant:"contained",onClick:function(){return e.setState({purchased:3})}}," ",this.props.majorCost," ")),r.a.createElement("td",null,this.props.minorCost>0&&r.a.createElement(h.a,{color:"primary",variant:"contained",onClick:function(){return e.setState({purchased:2})}}," ",this.props.minorCost," ")),r.a.createElement("td",null,this.props.lesserCost>0&&r.a.createElement(h.a,{color:"primary",variant:"contained",onClick:function(){return e.setState({purchased:1})}}," ",this.props.lesserCost," "))):r.a.createElement("tr",null,r.a.createElement("td",null,this.props.name),r.a.createElement("td",null,3==this.state.purchased&&r.a.createElement(h.a,{color:"secondary",variant:"contained",onClick:function(){return e.setState({purchased:0})}}," X ")),r.a.createElement("td",null,2==this.state.purchased&&r.a.createElement(h.a,{color:"secondary",variant:"contained",onClick:function(){return e.setState({purchased:0})}}," X ")),r.a.createElement("td",null,1==this.state.purchased&&r.a.createElement(h.a,{color:"secondary",variant:"contained",onClick:function(){return e.setState({purchased:0})}}," X ")))}}]),t}(r.a.Component),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={selectedPowers:{},totalCP:0,remainingCP:0},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(m.a,{"aria-describedby":"Manage Powers","aria-labelledby":"Manage Powers",className:"manage-powers-dialog",fullWidth:!0,onClose:this.props.handleClose,open:!0},r.a.createElement(p.a,null,"Manage Powers"),r.a.createElement(f.a,null,r.a.createElement("form",{onSubmit:function(t){return e.props.handleConfirm(e.state.selectedPowers)}},r.a.createElement(w.a,{required:!0,variant:"outlined"},r.a.createElement(b.a,{id:"total-cp-input",label:"Total CP",type:"number",onChange:function(){return e.calculateRemainingCP},className:"total-cp-input"}),"Remaining CP: ",this.state.remainingCP,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Power"),r.a.createElement("th",null,"Major"),r.a.createElement("th",null,"Minor"),r.a.createElement("th",null,"Lesser"))),r.a.createElement("tbody",null,this.props.powerData&&this.props.powerData.map(function(t){if(t.Major||t.Minor||t.Lesser)return r.a.createElement(P,{name:t.Power,majorCost:t.Major,minorCost:t.Minor,lesserCost:t.Lesser,purchase:function(t,a){return e.purchasePower(t,a)}})})))),r.a.createElement("div",{className:"actionButtons"},r.a.createElement(h.a,{onClick:function(){return e.props.handleConfirm(e.state.selectedPowers)},color:"primary"},"Save"),r.a.createElement(h.a,{onClick:function(){return e.props.handleClose()},color:"primary"},"Cancel")))))}},{key:"calculateRemainingCP",value:function(){this.setState({remainingCP:this.state.totalCP})}},{key:"purchasePower",value:function(e,t){this.state.selectedPowers[e]=t}}]),t}(r.a.Component),E=function(e){var t=e.toggleManagePowers;return r.a.createElement("nav",{className:"navbar navbar-light bg-light"},r.a.createElement("div",{className:"navbar-brand"},r.a.createElement(h.a,{color:"primary",variant:"contained",onClick:t}," Manage Powers ")))},g=a(107),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={abilityList:[],buffList:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){for(var e=[],t=[{field:"name",headerName:"Name",width:250},{field:"action",headerName:"Action",width:120},{field:"atk",headerName:"Atk",width:120},{field:"dmg",headerName:"Roll",width:180},{field:"effect",headerName:"Effect",width:150},{field:"detail",headerName:"Detail",width:100,renderCell:function(e){return r.a.createElement(h.a,{variant:"contained",color:"primary",size:"small",onClick:function(){return alert(e.value)}},"?")}}],a=0;a<this.props.abilities.length;a++){var n=this.props.abilities[a];e.push({id:a,name:n.name,action:n.action,atk:n.atk,dmg:n.dmg,effect:n.effect,detail:n.detail})}return r.a.createElement("div",{style:{height:300,width:"100%"}},r.a.createElement(g.a,{hideFooter:!0,hideFooterPagination:!0,rows:e,columns:t}))}}]),t}(r.a.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).closePanels=function(){a.setState({showManagePowersPanel:!1})},a.showManagePowersPanel=function(){a.setState({showManagePowersPanel:!0})},a.state={showManagePowersPanel:!1,selectedPowers:{},powerData:[],parsedAbilities:[],parsedBuffs:[]},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=window.localStorage.getItem("selectedPowers");if(null!=t)try{this.parseAbilities(JSON.parse(t))}catch(a){}fetch("https://raw.githubusercontent.com/aburnettt/adxsheets/master/src/data/powers.csv").then(function(e){return e.text()}).then(function(t){e.setState({powerData:e.csvToJson(t)}),e.state.selectedPowers&&e.parseAbilities(e.state.selectedPowers)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(E,{toggleManagePowers:this.showManagePowersPanel}),r.a.createElement("main",{className:"container"},r.a.createElement(C,{abilities:this.state.parsedAbilities,buffs:this.state.parsedBuffs})),this.state.showManagePowersPanel&&r.a.createElement(v,{powerData:this.state.powerData,selectedPowers:this.state.selectedPowers,handleConfirm:function(t){return e.updateSelectedPowers(t)},handleClose:function(){return e.closePanels()}}))}},{key:"updateSelectedPowers",value:function(e){window.localStorage.setItem("selectedPowers",JSON.stringify(e)),this.parseAbilities(e),this.closePanels()}},{key:"csvToJson",value:function(e){for(var t=e.split("\r\n"),a=[],n=t[0].split(","),r=1;r<t.length;r++){for(var s={},i=t[r].split(","),o=0;o<n.length;o++)s[n[o]]=i[o];a.push(s)}return a}},{key:"parseAbilities",value:function(e){if(e&&0!==e.length){var t=[];this.state.powerData.forEach(function(a){if(e[a.Power]&&e[a.Power]>0)if("Ability"===a.Row){var n={name:a.Power,action:a.Action,dmg:a.r5,atk:"1d20",effect:a.Effect,detail:a.Detail,tags:a.Tags.split(" "),condition:a.Condition};t.push(n)}else a.row}),this.setState({parsedAbilities:t,parsedBuffs:[],selectedPowers:e})}}}]),t}(r.a.Component);a(140),a(141);i.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[129,1,2]]]);
//# sourceMappingURL=main.af1c0135.chunk.js.map